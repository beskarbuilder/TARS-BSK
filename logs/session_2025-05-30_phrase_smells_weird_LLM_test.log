(tars_venv) tarsadmin@tarspi:~/tars_files $ python3 /home/tarsadmin/tars_files/core/tars_core.py
âœ… Backend GPIO configurado: lgpio
2025-05-30 09:52:30,784 - modules.semantic_engine - INFO - ðŸ§  Motor semÃ¡ntico inicializado con modelo en: /home/tarsadmin/tars_files/ai_models/sentence_transformers/all-MiniLM-L6-v2
2025-05-30 09:52:33,405 - modules.semantic_engine - INFO - ðŸ“‚ Cargando modelo desde: /home/tarsadmin/tars_files/ai_models/sentence_transformers/all-MiniLM-L6-v2
2025-05-30 09:52:33,406 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-05-30 09:52:33,406 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: /home/tarsadmin/tars_files/ai_models/sentence_transformers/all-MiniLM-L6-v2
2025-05-30 09:52:33,623 - modules.semantic_engine - INFO - âœ… Modelo cargado correctamente
Batches: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00, 38.77it/s]
2025-05-30 09:52:33,653 - modules.semantic_engine - INFO - ðŸ§ª Test de inferencia exitoso: vector de dimensiÃ³n 384
2025-05-30 09:52:33,653 - memory.semantic_storage - INFO - Almacenamiento semÃ¡ntico inicializado en: /home/tarsadmin/tars_files/memory/embeddings_preferencias.npz
2025-05-30 09:52:33,656 - memory.semantic_storage - INFO - Cargados 8 embeddings desde /home/tarsadmin/tars_files/memory/embeddings_preferencias.npz
2025-05-30 09:52:33,658 - modules.preferences_manager - INFO - Afinidades de TARS cargadas: 5 total
2025-05-30 09:52:33,658 - modules.preferences_manager - INFO -    âœ¨ Entusiasmo (nivel 2+): 2
2025-05-30 09:52:33,658 - modules.preferences_manager - INFO -    ðŸ˜ Neutro (nivel 0-1): 0
2025-05-30 09:52:33,658 - modules.preferences_manager - INFO -    ðŸ™„ Sarcasmo (nivel <0): 3
2025-05-30 09:52:33,658 - modules.preferences_manager - INFO - Gestor de preferencias inicializado con 5 afinidades
2025-05-30 09:52:33,661 - TARS.emotion - INFO - âœ… Cargado sarcasmo: 12 temas, 8 patrones, 9 keywords
2025-05-30 09:52:33,663 - TARS.emotion - INFO - âœ… Cargado empatia: 7 temas, 5 patrones, 5 keywords
2025-05-30 09:52:33,664 - TARS.emotion - INFO - âœ… Cargado legacy: 7 temas, 4 patrones, 7 keywords
2025-05-30 09:52:33,664 - TARS - INFO - âœ… Estado emocional inicial: sarcasmo: 85%, empatia: 10%, legacy: 40%
2025-05-30 09:52:33,665 - TARS.LED - INFO - âœ… LED 'azul' inicializado en GPIO17
2025-05-30 09:52:33,665 - TARS.LED - INFO - âœ… LED 'rojo' inicializado en GPIO27
2025-05-30 09:52:33,666 - TARS.LED - INFO - âœ… LED 'verde' inicializado en GPIO22
2025-05-30 09:52:33,666 - TARS - INFO - Detector de intenciones inicializado
2025-05-30 09:52:33,666 - TARS.TTS - INFO - ðŸŽ›ï¸ Filtro de radio activado: banda=[200, 3500], ruido=True, compresiÃ³n=True, efecto_mando=False, ganancia=0.0dB
2025-05-30 09:52:33,667 - TARS - INFO - ðŸ“Š Preferencias recuperadas: 13
2025-05-30 09:52:33,668 - TARS - INFO - ðŸ§  Preferencias cargadas al inicio: 11 gustos, 2 disgustos
2025-05-30 09:52:33,668 - modules.speaker_identifier - INFO - âœ… Identificador de hablantes inicializado con 1 perfiles
2025-05-30 09:52:33,669 - TARS - INFO - âœ… Identificador de hablantes inicializado
2025-05-30 09:52:33,669 - TARS - INFO - âœ… Cargando modelo desde ai_models/phi3/Phi-3-mini-4k-instruct.Q4_K_M.gguf...
llama_init_from_model: n_ctx_per_seq (160) < n_ctx_train (4096) -- the full capacity of the model will not be utilized
2025-05-30 09:52:33,810 - TARS - INFO - âœ… Modelo cargado en 0.14 segundos
2025-05-30 09:52:33,811 - TARS - INFO - ðŸ”Œ Inicializando sistema de plugins...
2025-05-30 09:52:33,811 - TARS.PluginSystem - INFO - ConfiguraciÃ³n de plugins cargada correctamente
2025-05-30 09:52:33,811 - TARS.PluginSystem - INFO - Plugins habilitados: homeassistant
2025-05-30 09:52:33,811 - TARS.PluginSystem - INFO - Sistema de plugins inicializado
2025-05-30 09:52:33,811 - TARS.PluginSystem - INFO - Inicializando 1 plugins
2025-05-30 09:52:33,812 - TARS.HomeAssistantPlugin - INFO - Plugin Home Assistant inicializado: 192.168.50.112:8084
2025-05-30 09:52:33,817 - TARS.HomeAssistantPlugin - INFO - âœ… ConexiÃ³n con Home Assistant exitosa
2025-05-30 09:52:33,817 - TARS.PluginSystem - INFO - âœ… Plugin homeassistant inicializado
2025-05-30 09:52:33,817 - TARS - INFO - âœ… Sistema de plugins inicializado correctamente
2025-05-30 09:52:33,818 - TARS - INFO - âœ… TARS inicializado en 0.15 segundos
Â¿Usar entrada por voz? (S): s

ðŸŽ¤ Dispositivos de audio disponibles:
  [0] USB Audio Device: - (hw:0,0) - 44100Hz
  [1] sysdefault - 48000Hz
  [5] spdif - 44100Hz
  [6] default - 48000Hz
âœ… Seleccionado automÃ¡ticamente: [0] USB Audio Device: - (hw:0,0)
âš ï¸ Dispositivo no admite 16000 Hz, usando 44100 Hz con resampling
LOG (VoskAPI:ReadDataFiles():model.cc:213) Decoding params beam=13 max-active=7000 lattice-beam=6
LOG (VoskAPI:ReadDataFiles():model.cc:216) Silence phones 1:2:3:4:5:6:7:8:9:10
LOG (VoskAPI:RemoveOrphanNodes():nnet-nnet.cc:948) Removed 0 orphan nodes.
LOG (VoskAPI:RemoveOrphanComponents():nnet-nnet.cc:847) Removing 0 orphan components.
LOG (VoskAPI:ReadDataFiles():model.cc:248) Loading i-vector extractor from ai_models/vosk/model/ivector/final.ie
LOG (VoskAPI:ComputeDerivedVars():ivector-extractor.cc:183) Computing derived variables for iVector extractor
LOG (VoskAPI:ComputeDerivedVars():ivector-extractor.cc:204) Done.
LOG (VoskAPI:ReadDataFiles():model.cc:279) Loading HCLG from ai_models/vosk/model/graph/HCLG.fst
LOG (VoskAPI:ReadDataFiles():model.cc:297) Loading words from ai_models/vosk/model/graph/words.txt
LOG (VoskAPI:ReadDataFiles():model.cc:308) Loading winfo ai_models/vosk/model/graph/phones/word_boundary.int
LOG (VoskAPI:ReadDataFiles():model.cc:315) Loading subtract G.fst model from ai_models/vosk/model/rescore/G.fst
LOG (VoskAPI:ReadDataFiles():model.cc:317) Loading CARPA model from ai_models/vosk/model/rescore/G.carpa
LOG (VoskAPI:ReadDataFiles():model.cc:323) Loading RNNLM model from ai_models/vosk/model/rnnlm/final.raw
âœ… Modelo de voz cargado desde ai_models/vosk/model
âœ… Configurado resampling de 44100Hz a 16000Hz
2025-05-30 09:52:48,137 - TARS - INFO - âœ… SpeechListener inicializado correctamente

ðŸŽ¤ Di 'oye tars' para comenzar (Ctrl+C para salir)

ðŸŽ¤ Escuchando... Di 'oye TARS' o algo parecido
ðŸ—£ï¸ Escuchado: tars
ðŸ”¥ Wakeword detectada por coincidencia difusa
2025-05-30 09:52:55,561 - TARS - INFO - ðŸ” IdentificaciÃ³n de hablante preparada pero no implementada en esta fase
2025-05-30 09:52:55,562 - TARS - INFO - âž¡ï¸ Reproduciendo fragmento: 'Te escucho.'
2025-05-30 09:52:55,562 - TARS.TTS - INFO - ðŸ—£ï¸ Generando voz: 'Te escucho.'
2025-05-30 09:52:56,258 - TARS.TTS - INFO - ðŸŽ›ï¸ Aplicando Filtro de radio estÃ¡ndar [banda: 200-3500Hz]...
2025-05-30 09:52:56,265 - TARS.RadioFilter - INFO - ðŸ•’ Tiempo de procesamiento de filtro Mandaloriano: 0.007s
2025-05-30 09:52:57,330 - TARS.TTS - INFO - ðŸ”Š ReproducciÃ³n completada
â±ï¸ Wakeword reconocida en 3.67s
ðŸŽ¤ Ahora puedes hablar...
ðŸŽ¤ Escuchando tu pregunta...
[VOSK] Texto detectado: 'huele raro en casa' (confianza: 1.00)
ðŸ—£ï¸ Entendido: huele raro en casa
ðŸ§  Procesando: huele raro en casa
2025-05-30 09:53:02,626 - TARS.PluginSystem - INFO - ðŸ” PluginSystem recibiÃ³ comando: 'huele raro en casa'
2025-05-30 09:53:02,627 - TARS.PluginSystem - INFO - ðŸ”Œ Plugins activos: ['homeassistant']
2025-05-30 09:53:02,627 - TARS.PluginSystem - INFO - ðŸ  Llamando a HomeAssistant.process_command()
2025-05-30 09:53:02,627 - TARS.HomeAssistantPlugin - INFO - ðŸ  HomeAssistant analizando: 'huele raro en casa'
2025-05-30 09:53:02,627 - TARS.HomeAssistantPlugin - INFO - ðŸ  No se detectÃ³ acciÃ³n clara en el comando
2025-05-30 09:53:02,627 - TARS.PluginSystem - INFO - ðŸ  Respuesta de HomeAssistant: â„¹ï¸ Comando no reconocido
2025-05-30 09:53:02,627 - TARS.PluginSystem - INFO - ðŸ  Llamando a HomeAssistant.process_query()
2025-05-30 09:53:02,627 - TARS.PluginSystem - INFO - ðŸ  Respuesta de query: â„¹ï¸ Query no reconocida
2025-05-30 09:53:02,627 - TARS.PluginSystem - INFO - ðŸ” NingÃºn plugin procesÃ³ el comando
ðŸ” DEBUG GET_EMOTIONAL: input='huele raro en casa'
ðŸ” DEBUG RESPONSES_FOUND: 0 responses after triggers
ðŸ” DEBUG TONE: Starting tone analysis
ðŸ” DEBUG TONE_RESULT: {'dominant_tone': None, 'suggested_emotion': None}
ðŸ” DEBUG CHECK_ALL: should_use_llm=False, response=''
ðŸ” DEBUG: emotion_response='', sarcasmo_level=85, tema='desconocido', nivel=1
2025-05-30 09:53:02,635 - TARS - INFO - âœ… AnÃ¡lisis completo en 0.01s
2025-05-30 09:53:02,635 - TARS - INFO - ðŸ“ Prompt final (6 tokens): Usuario: huele raro en casa
TARS:...
2025-05-30 09:53:02,635 - TARS - INFO - ðŸ”Š Seleccionado archivo de audio: thinking_021.wav
2025-05-30 09:53:02,635 - TARS - INFO - ðŸ§  Generando respuesta...
2025-05-30 09:53:02,636 - TARS - INFO - âš™ï¸ Tokens: promptâ‰ˆ6, disponibles=134, asignados=40
2025-05-30 09:53:02,636 - TARS - INFO - ðŸš¨ PROMPT COMPLETO REAL: 'Usuario: huele raro en casa
TARS:'
2025-05-30 09:53:02,636 - TARS - INFO - ðŸš¨ LONGITUD REAL: 6 palabras
2025-05-30 09:53:04,638 - TARS - INFO - ðŸ”Š Reproduciendo audio de pensamiento...
2025-05-30 09:53:10,833 - TARS - INFO - â±ï¸ Tiempo generando tokens: 8.20s
2025-05-30 09:53:10,833 - TARS - INFO - âœ… Respuesta generada: Claro, eso puede ser molesto. Â¿PodrÃ­as proporcionar mÃ¡s deta...
2025-05-30 09:53:10,834 - TARS - INFO - â±ï¸ Esperando a que termine el audio de pensamiento...
2025-05-30 09:53:12,487 - TARS - INFO - âœ… Audio de pensamiento finalizado
2025-05-30 09:53:12,487 - TARS - INFO - âœ… Audio completado, continuando
2025-05-30 09:53:12,488 - TARS - INFO - ðŸ§ª Total proceso respuesta: 9.85s
2025-05-30 09:53:12,488 - TARS - INFO - â±ï¸ Tiempo de espera real tras Ãºltima frase: 9.85s
2025-05-30 09:53:12,488 - TARS - INFO - âž¡ï¸ Reproduciendo fragmento: 'Claro, eso puede ser molesto. Â¿PodrÃ­as proporcionar mÃ¡s detalles para poder ayudarte mejor?'
2025-05-30 09:53:12,488 - TARS.TTS - INFO - ðŸ—£ï¸ Generando voz: 'Claro, eso puede ser molesto. Â¿PodrÃ­as proporcionar mÃ¡s detalles para poder ayudarte mejor?'
2025-05-30 09:53:13,846 - TARS.TTS - INFO - ðŸŽ›ï¸ Aplicando Filtro de radio estÃ¡ndar [banda: 200-3500Hz]...
2025-05-30 09:53:13,881 - TARS.RadioFilter - INFO - ðŸ•’ Tiempo de procesamiento de filtro Mandaloriano: 0.035s
2025-05-30 09:53:19,332 - TARS.TTS - INFO - ðŸ”Š ReproducciÃ³n completada
2025-05-30 09:53:20,334 - modules.preferences_manager - INFO - Afinidades de TARS cargadas: 5 total
2025-05-30 09:53:20,335 - modules.preferences_manager - INFO -    âœ¨ Entusiasmo (nivel 2+): 2
2025-05-30 09:53:20,335 - modules.preferences_manager - INFO -    ðŸ˜ Neutro (nivel 0-1): 0
2025-05-30 09:53:20,335 - modules.preferences_manager - INFO -    ðŸ™„ Sarcasmo (nivel <0): 3
2025-05-30 09:53:20,335 - modules.preferences_manager - INFO - Gestor de preferencias inicializado con 5 afinidades
2025-05-30 09:53:20,341 - TARS - INFO - ðŸ“¤ Respuesta generada en 17.71s
TARS: Claro, eso puede ser molesto. Â¿PodrÃ­as proporcionar mÃ¡s detalles para poder ayudarte mejor?
â±ï¸ Tiempo comando: 4.29s
ðŸŽ¤ Ahora puedes hablar...
ðŸŽ¤ Escuchando tu pregunta...
